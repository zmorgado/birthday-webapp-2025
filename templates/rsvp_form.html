<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ConfirmaciÃ³n de Asistencia</title>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #0a0a0a;
      background-image: url('/static/img/bombonera.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    @media (max-width: 768px) {
      body {
        background-attachment: scroll;
        background-position: top;
      }
    }
    .info-section h3 {
      border-bottom: 2px solid #FFD700;
      padding-bottom: 4px;
      margin-bottom: 8px;
    }
    .info-section p {
      margin-bottom: 6px;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center px-4 py-10 bg-black/70 bg-blend-darken">

  <div class="w-full max-w-md bg-[#002b6c]/90 backdrop-blur-xl rounded-2xl shadow-xl p-8 space-y-6 text-white"
        x-data="{
        name: '',
        attendance: '',
        error: '',
        success: true
        }">

    <!-- TÃ­tulo principal -->
    <h1 class="text-4xl font-extrabold text-white text-center">2/8 en Ostende ğŸ’™ğŸ’›ğŸ’™</h1>
    <p class="text-center text-sm text-white/80">ConfirmÃ¡ asistencia a la cena, la fiesta o ambas</p>

    <!-- Formulario -->
    <form action="/rsvp" method="post" @submit.prevent="
        if (!name || !attendance) {
            error = 'Por favor, completÃ¡ todos los campos.';
            success = false;
        } else {
            error = '';
            success = false;
        }
        ">

      <div class="mb-4">
        <label for="name" class="block text-sm font-semibold text-white">Nombre (o apodo)</label>
        <input type="text" id="name" name="name" x-model="name"
               class="mt-1 w-full rounded-md border border-yellow-400 bg-transparent text-white placeholder-white/70 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-300" placeholder="Ej: Juan RomÃ¡n" required />
      </div>

      <div class="mb-4">
        <label for="attendance" class="block text-sm font-semibold text-white">Â¿A quÃ© venis?</label>
        <select id="attendance" name="attendance" x-model="attendance"
                class="mt-1 w-full rounded-md border border-yellow-400 bg-transparent text-white p-2 focus:outline-none focus:ring-2 focus:ring-yellow-300">
          <option value="">ElegÃ­ una opciÃ³n</option>
          <option value="both">A ambas ğŸ½ï¸ğŸ‰</option>
          <option value="dinner">Solo a la cena ğŸ½ï¸</option>
          <option value="party">Solo a la fiesta ğŸ‰</option>
          <option value="none">A ninguna ğŸ˜”</option>
        </select>
      </div>

      <!-- Mensaje de error -->
      <template x-if="error">
        <p class="text-red-400 text-sm mb-2" x-text="error"></p>
      </template>

      <!-- BotÃ³n de confirmaciÃ³n -->
      <button type="submit"
              class="w-full bg-yellow-400 text-[#002b6c] font-bold py-2 px-4 rounded-md hover:bg-yellow-300 transition-all">
        Confirmar asistencia
      </button>
    </form>

    <!-- ConfirmaciÃ³n -->
    <div id="confirmation-message" style="display: none;" class="mt-6 text-center">
      <div class="bg-yellow-400/90 text-[#002b6c] border-2 border-white p-5 rounded-xl shadow-xl space-y-2">
        <p class="text-sm font-medium">Gracias por confirmar! Nos vemos el 2/8 ğŸ’¥ğŸ’™ğŸ’›</p>
      </div>
    </div>

    <!-- Nueva secciÃ³n para informaciÃ³n del lugar -->
    <section class="venue-info mt-8 info-section">
      <h2 class="text-xl font-bold mb-4">Info</h2>

      <!-- Lugar de la Cena -->
      <div class="dinner-info mb-6">
          <h3 class="text-lg font-semibold">Cena en Ostende</h3>
          <p class="text-sm">Hora: <strong>21:00</strong></p>
          <p class="text-sm">UbicaciÃ³n: <a href="https://maps.app.goo.gl/Vm3tD6PYLRCFgUoM6" target="_blank" class="text-blue-500 underline">Google Maps</a> (Belgrano)</p>
          <p class="text-sm">Instagram: <a href="https://www.instagram.com/ostende_ba/" target="_blank" class="text-blue-500 underline">@ostende_ba</a></p>
      </div>

      <!-- Lugar de la Fiesta -->
      <div class="party-info">
          <h3 class="text-lg font-semibold">Pary</h3>
          <p class="text-sm">Hora: <strong>Alrededor de la 1 post cena</strong></p>
          <p class="text-sm">UbicaciÃ³n: <a href="https://maps.app.goo.gl/xi3dzVXJUVNqS88dA" target="_blank" class="text-blue-500 underline">Google Maps</a> (Chacarita)</p>
          <p class="text-sm">Instagram: <a href="https://www.instagram.com/polenta.polenta/" target="_blank" class="text-blue-500 underline">@polenta.polenta</a></p>
      </div>
    </section>

    <!-- Link a la entrada, siempre visible -->
    <section class="party-ticket mt-8">
      <h3 class="text-sm font-semibold mb-2">Si te sumas, te dejo el link para comprar la entrada:</h3>
      <a href="https://venti.com.ar/evento/polenta"
         class="inline-block bg-yellow-400 text-[#002b6c] font-bold py-2 px-5 rounded-full hover:bg-yellow-300 transition-all shadow-lg">
        ğŸŸï¸ Polenta Polenta ğŸŸï¸
      </a>
    </section>

  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const urlParams = new URLSearchParams(window.location.search);
      const success = urlParams.get("success");
      if (success === "true") {
        document.getElementById("confirmation-message").style.display = "block";
      }
    });
  </script>
</body>
</html>
